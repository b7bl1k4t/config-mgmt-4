# Проект: Ассемблер и Интерпретатор

## Описание проекта
Этот проект предоставляет инструменты для преобразования программ на ассемблере в машинный код и их последующего выполнения. Включены:
1. **Ассемблер**: Конвертирует текстовый файл с инструкциями на ассемблере в бинарный формат.
2. **Интерпретатор**: Выполняет бинарные инструкции, имитируя работу процессора.

## Основные функции
### Ассемблер
- Преобразует инструкции из текстового файла в бинарный формат.
- Генерирует лог-файл с информацией о каждой инструкции.
- Проверяет синтаксис каждой строки программы.

### Интерпретатор
- Выполняет бинарные инструкции.
- Поддерживает базовые операции: загрузка констант, чтение/запись памяти, арифметические операции.
- Позволяет сохранить результаты выполнения в CSV-файл.

## Структура проекта

### Файлы
- **`assembler.py`**: Скрипт для преобразования ассемблерного кода в бинарный.
- **`interpreter.py`**: Скрипт для выполнения бинарного кода.
- **`program.asm`**: Пример программы на ассемблере.
- **`result.csv`**: Выходной файл с результатами выполнения программы.
- **`log.csv`**: Лог-файл, содержащий детали ассемблирования.

### Основные файлы и их функции
#### `assembler.py`
1. **Парсинг инструкций**:
   - Удаляет комментарии и разбивает строку на токены.
2. **Кодирование инструкций**:
   - Преобразует инструкции в бинарный формат в соответствии с таблицей опкодов.
3. **Генерация бинарного и лог-файлов**:
   - Сохраняет результат в бинарный файл и записывает логи в формате CSV.

#### `interpreter.py`
1. **Инициализация памяти и регистров**:
   - Создаёт 16 регистров и память для выполнения.
2. **Декодирование и выполнение инструкций**:
   - Поддерживаемые операции: `LOAD_CONST`, `LOAD_MEM`, `STORE_MEM`, `ADD`.
3. **Сохранение результатов выполнения**:
   - Сохраняет значения из указанного диапазона памяти в CSV-файл.

## Установка и запуск

### Предварительные требования
- Python 3.6+

### Инструкция по запуску
#### Ассемблер
1. Запустите скрипт `assembler.py`:
   ```bash
   python assembler.py <input_file> <output_file> <log_file>
   ```
   Например:
   ```bash
   python assembler.py program.asm program.bin log.csv
   ```
2. В результате будет создан бинарный файл `program.bin` и лог-файл `log.csv`.

#### Интерпретатор
1. Запустите скрипт `interpreter.py`:
   ```bash
   python interpreter.py <binary_file> <memory_range_start> <memory_range_end> <result_file>
   ```
   Например:
   ```bash
   python interpreter.py program.bin 100 103 result.csv
   ```
2. Результаты выполнения будут сохранены в файл `result.csv`.

## Пример
### Программа на ассемблере (`program.asm`):
```asm
LOAD_CONST R1, 1       # R1 = 1
STORE_MEM R1, 1        # Сохранить R1 в memory[1]
LOAD_CONST R0, 100     # R0 = 100 (адрес начала массива)
LOAD_CONST R1, 10      # R1 = 10
STORE_MEM R0, R1       # memory[100] = 10
```

### Команда ассемблирования:
```bash
python assembler.py program.asm program.bin log.csv
```

### Команда выполнения:
```bash
python interpreter.py program.bin 100 103 result.csv
```

### Результаты выполнения:
`result.csv`:
```csv
Address,Value
100,10
101,20
102,30
103,40
```

## Примечания
- Формат бинарного файла основан на 32-битных инструкциях.
- Лог-файл содержит информацию о каждой строке исходного ассемблерного кода.
- Поддерживаемые инструкции: `LOAD_CONST`, `LOAD_MEM`, `STORE_MEM`, `ADD`.
